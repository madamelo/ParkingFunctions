\section{A direct poset linked to Dyck paths}

\subsection{Dyck Paths}

\begin{notation}
    We denote the number of occurences of a symbol $s$ in
    a word $w$ by $|w|_s$.
\end{notation}

\begin{definition}[Dyck path]
    A \emph{Dyck word} is a word $w \in \{0,1\}^*$ such
    that :
    \begin{itemize}
        \item for each \emph{suffix} $w'$ of $w$,
            $|w'|_1 \geqslant |w'|_0$.
        \item $|w|_0 = |w|_1$.
    \end{itemize}
    A Dyck word of length $2n$ can be represented as a 
    \emph{path} from $(0,0)$ to $(n,n)$ that stays over
    $x = y$, called a \emph{Dyck path} :
    \begin{itemize}
        \item Each $1$ corresponds to a \emph{North step}
        $\uparrow$. 
        \item Each $0$ corresponds to an \emph{East step}
        $\rightarrow$.
    \end{itemize}
\end{definition}

We denote by $\mathcal{D}_n$ the set of Dyck words of
length $2n$.

\begin{example}[$n = 5$]
    ~\\
    \begin{align*}
        &w_1 = 1011000110 \text{ is \emph{not} a Dyck word,
        because } |1011000|_0 > |1011000|_1.\\
        &w_2 = 1011010101 \text{ is \emph{not} a Dyck word,
        because } |w_2|_0 \neq |w_2|_1.\\
        &w_3 = 1011010100 \text{ \emph{is} a Dyck word : }\\
    \end{align*}
    \input{fig/fig19.tex}
\end{example}

\begin{theorem}[Andr√©, 1887]
    Let $d_n$ be the cardinal of $\mathcal{D}_n$.
    We have $$d_n = \frac{1}{n + 1} \binom {2n}{n}$$
\end{theorem}

which is the $n^{th}$ Catalan number.

\begin{example}[$n = 3$]
    $d_n = 5$.
    \begin{center}
        \input{fig/fig20.tex}
        \input{fig/fig21.tex}
        \input{fig/fig22.tex}
        \input{fig/fig23.tex}
        \input{fig/fig24.tex}
    \end{center}
\end{example}

\begin{prop}
    This means we can create a \emph{bijection} between
    $\mathcal{PF'}_n$ and $\mathcal{D}_n$.
\end{prop}

\begin{proof}
    ~\
\begin{itemize}
    \item $\mathcal{PF'}_n \to \mathcal{D}_n$ :
    Let $f = (a_1, \ldots, a_n) \in \mathcal{PF'}_n$
    be our primitive parking function.
    For $i \in \{1, \ldots, n\}$, we define $l_i$ the
    number of occurences of $i$ in $f$.\\
    The corresponding Dyck word will be
    $\underbrace{1 \cdots 1}_{l_1}0
     \underbrace{1 \cdots 1}_{l_2}0 \cdots
     \underbrace{1 \cdots 1}_{l_n}0$.
    
    \item $\mathcal{D}_n \to \mathcal{PF'}_n$ :
    Let $w$ be our Dyck word, and consider its path
    representation. We define $s_i$ to be the distance
    between the segment from $(0, i - 1)$ to $(0, i)$
    and the $i^{th}$ North step. Then, let $a_i = s_i + 1$.\\
    The corresponding primitive parking function is 
    $(a_1, \ldots, a_n)$.
\end{itemize}
\end{proof}

\begin{example}[$n = 6, \mathcal{PF'}_n \to \mathcal{D}_n$]
    ~\
    \begin{itemize}
        \item $f = (1, 1, 2, 4, 5, 5)$
            \subitem $l_1 = 2$
            \hspace{2cm} $l_2 = 1$
            \hspace{2cm} $l_3 = 0$
            \subitem $l_4 = 1$
            \hspace{2cm} $l_5 = 2$
            \hspace{2cm} $l_6 = 0$
        \item $w = (110100101100)$
    \end{itemize}
    \input{fig/fig25.tex}
\end{example}

\begin{example}[$n = 6, \mathcal{D}_n \to \mathcal{PF'}_n$]
    ~\
    \begin{itemize}
        \item $w = 101011010010$
    \end{itemize}
    \input{fig/fig26.tex}
    \begin{itemize}
        \item Distances : 
            \subitem $s_1 = 0$
                \hspace{2cm} $a_1 = 1$
            \subitem $s_2 = 1$
                \hspace{2cm} $a_2 = 2$
            \subitem $s_3 = 2$
                \hspace{2cm} $a_3 = 3$
            \subitem $s_4 = 2$
                \hspace{2cm} $a_4 = 3$
            \subitem $s_5 = 3$
                \hspace{2cm} $a_5 = 4$
            \subitem $s_6 = 5$
                \hspace{2cm} $a_6 = 6$
        \item $f = (1, 2, 3, 3, 4, 6)$
    \end{itemize}
    
\end{example}

To apply a similar bijection to non-primitive parking
functions, we will need an upgraded version of Dyck paths,
that is, Labeled Dyck Paths.

\subsection{Labeled Dyck Paths}

\begin{definition}[Labeled Dyck Word]
    A \emph{labeled Dyck word} is a word $w \in 
    \{0, \ldots, n\}^*$ such that :
    \begin{itemize}
        \item for each suffix $w'$ of $w$,
            $|w'|_{\neq 0} \geqslant |w'|_0$.
        \item $|w|_0 = |w|_{\neq 0}$.
        \item for each $i \in \{1, \ldots, n\}$, $w$ has 
            exactly one occurence of $i$.
        \item if $w_i \neq 0$ and $w_{i+1} \neq 0$,
            then $w_i < w_{i+1}$. That is, consecutive
            North steps have increasing labels.
    \end{itemize}
\end{definition}

A labeled Dyck word of length $2n$ can be represented
as a \emph{path} from $(0,0)$ to $(n,n)$, where each North
step is associated to a label :
\begin{itemize}
    \item Each $i \neq 0$ corresponds to a
        \emph{North step} $\uparrow$ labeled $i$.
    \item Each $0$ corresponds to an
        \emph{East step} $\rightarrow$.
\end{itemize}
Those paths are called \emph{labeled Dyck paths}.\\
We denote by $\mathcal{LD}_n$ the set of labeled
Dyck words of length $2n$.

\begin{example}[$n = 5$]
    \begin{align*}
        &w_1 = 4051002030 \text{ is \emph{not} a labeled
            Dyck word, because }5 > 1.\\
        &w_2 = 4015002030 \text{ \emph{is} a labeled
            Dyck word :}\\
    \end{align*}
    \input{fig/fig27.tex}
\end{example}

\begin{theorem}
    Let $ld_n$ be the cardinal of $\mathcal{LD}_n$.
    We have $$ld_n = (n + 1)^{n - 1}$$.
\end{theorem}

\begin{example}[$n = 3$]
    $ld_n = 4^2 = 16$
    \begin{itemize}
        \item Word of shape $XXX000$ :
            \subitem $123000$
        \item Words of shape $XX0X00$ :
            \subitem $120300$
            \hspace{2cm} $130200$
            \hspace{2cm} $230100$
        \item Words of shape $XX00X0$ :
            \subitem $120030$
            \hspace{2cm} $130020$
            \hspace{2cm} $230010$
        \item Words of shape $X0XX00$ :
            \subitem $102300$
            \hspace{2cm} $201300$
            \hspace{2cm} $301200$
        \item Words of shape $X0X0X0$ :
            \subitem $102030$
            \hspace{2cm} $103020$
            \hspace{2cm} $201030$
            \subitem $203010$
            \hspace{2cm} $301020$
            \hspace{2cm} $302010$
    \end{itemize}
    
\end{example}

\begin{prop}
    This means we can create a \emph{bijection} between
    $\mathcal{PF}_n$ and $\mathcal{LD}_n$.
\end{prop}

\begin{proof}
    ~\
    \begin{itemize}
        \item $\mathcal{PF}_n \to \mathcal{LD}_n$ :
        Let $f = (a_1, \ldots, a_n) \in \mathcal{PF}_n$
        be our parking function. For $i \in \{1, \ldots,
        n\}$, we define $im_i$ : $\{j\ |\ a_j = i\}$. \\
        We then define $im_{i,1}, \ldots, im_{i,k_i}$ to be
        the elements of $im_i$ in increasing order.\\
        The corresponding labeled Dyck word will be \\
        $\underbrace{im_{1,1} \cdots im_{1,k_1}}_{im_1}0
         \underbrace{im_{2,1} \cdots im_{2,k_2}}_{im_2}0
         \cdots
         \underbrace{im_{n,1} \cdots im_{n,k_n}}_{im_n}0$.

        \item $\mathcal{LD}_n \to \mathcal{PF}_n$ :
        Let w be our labeled Dyck word, and consider its
        path representation. We define $s_i$ to be the
        distance between the segment from $(0, i-1)$ to
        $(0,i)$ and the $i^{th}$ North step.\\
        Then, let $label(i)$ be the label of the $i^{th}$
        North step, and $dist_i = \{label(j) | s_j = i\}$
        be the set of the labels of all North steps at
        distance $i$.\\
        Then, if $j \in dist_i$, let $a_j = i + 1$.\\
        The corresponding parking function is
        $(a_1, \ldots, a_n)$.
    \end{itemize}
\end{proof}

\begin{example}[$n = 6, \mathcal{PF}_n \to \mathcal{LD}_n$]
    ~\
    \begin{itemize}
        \item $f = (5, 2, 1, 4, 5, 1)$
            \subitem $im_1 = \{3, 6\}$
            \hspace{16mm} $im_2 = \{2\}$
            \hspace{24mm} $im_3 = \emptyset$
            \subitem $im_4 = \{4\}$
            \hspace{2cm} $im_5 = \{1, 5\}$
            \hspace{2cm} $im_6 = \emptyset$
        \item $w = 360200401500$
    \end{itemize}
    \input{fig/fig28.tex}
\end{example}

\begin{example}[$n = 6, \mathcal{LD}_n \to \mathcal{PF}_n$]
    ~\
    \begin{itemize}
        \item $w = 402560010030$
    \end{itemize}
    \input{fig/fig29.tex}
    \begin{itemize}
        \item Distances :
            \subitem $s_1 = 0$
            \hspace{2cm} $s_2 = 1$
            \hspace{2cm} $s_3 = 1$
            \subitem $s_4 = 1$
            \hspace{2cm} $s_5 = 3$
            \hspace{2cm} $s_6 = 5$
        \item Labels :
            \subitem $dist_0 = \{4\}$
            \hspace{2cm} $dist_1 = \{2, 5, 6\}$
            \hspace{2cm} $dist_2 = \emptyset$
            \subitem $dist_3 = \{1\}$
            \hspace{2cm} $dist_4 = \emptyset$
            \hspace{32mm} $dist_5 = \{3\}$
        \item $f = (4, 2, 6, 1, 2, 2)$
    \end{itemize}
\end{example}

\begin{rem}
    The primitive parking functions are exactly the
    parking functions corresponding to labeled Dyck paths
    where the $i^{th}$ North step is labeled $i$.
\end{rem}

With those bijections in mind, we can now define cover
relations that will issue in the expected bijective posets.

\subsection{Dyck - Parking Posets}

\subsubsection{Primitive Dyck - Parking Posets}

\begin{definition}[$\gtrdot_d$]
    For $w$ and $w'$ two Dyck words, we say that $w$
    covers $w'$, written $w \gtrdot_d w'$, if
    $\exists w_1, w_2$ such that :
    \begin{itemize}
        \item $w = w_101w_2$
        \item $w' = w_110w_2$
    \end{itemize}  
\end{definition}

\begin{example}[$n = 7$]
    $10110011001100 \gtrdot_d 10110101001100$
    \begin{itemize}
        \item $w_1 = 10110$
        \item $w_2 = 1001100$
    \end{itemize}
    \input{fig/fig30.tex}
\end{example}

\begin{rem}
    If $w_1 \gtrdot_d w_2$, then the path corresponding to
    $w_2$ is \emph{over} the path corresponding to $w_1$,
    and the \emph{difference} between the two paths is a
    square of size 1 by 1.
\end{rem}

\begin{prop}
    This covering relation defines a \emph{poset}
    for $\mathcal{D}_n$.
\end{prop}

\begin{example}[The poset of $\mathcal{D}_4$]
    ~\\
    \begin{center}
        \input{fig/fig31.tex}
        There are $\frac {1}{5} \binom{8}{4} = \frac{70}{5} = 14$
        elements in this poset.
    \end{center}
\end{example}

\begin{definition}[Nested Dyck paths]
    Two Dyck Paths $w_1$ and $w_2$ are said \emph{nested}
    if $w_1$ is equal to $w_2$ or over $w_2$. 
\end{definition}

We can thus easily deduce the following proposition from the
preceding remark.

\begin{prop}
    If there exists a sequence $w_1 \gtrdot_d w_2 \gtrdot_d
    w_3 \gtrdot_d \cdots \gtrdot_d w_k$ with $k \geqslant 0$,
    then $w_1$ and $w_k$ are \emph{nested}.
\end{prop}

Now that we have defined the cover relation for Dyck paths,
we have to define the corresponding relation for primitive
parking functions, that will allow us to create the wanted
bijective posets.

\begin{definition}[$\gtrdot'$]
    For $f$ and $g$ two primitive parking functions, we say
    that $f$ covers $g$, written $f \gtrdot' g$, if
    $\exists i$ such that :
    \begin{itemize}
        \item $f = (a_1, \ldots, a_{i-1}, a_i,\ \ \ \ 
            a_{i+1}, \ldots, a_n)$
        \item $g = (a_1, \ldots, a_{i-1}, a_i - 1, a_{i+1},
        \ldots, a_n)$
    \end{itemize}
\end{definition}

\begin{example}[$n = 6$]
    $(1, 1, 2, 3, 4, 5) \gtrdot' (1, 1, 2, 3, 3, 5)$    
\end{example}

\begin{prop}
    This covering relation defines a \emph{poset}
    for $\mathcal{PF'}_n$.
\end{prop}

\begin{example}[The poset of $\mathcal{PF'}_4$]
    ~\\
    \begin{center}
        \input{fig/fig32.tex}
        There are $\frac {1}{5} \binom{8}{4} = \frac{70}{5} = 14$
        elements in this poset.
    \end{center}
\end{example}

\begin{rem}
    The two posets are isomorphic, and one can be obtained by
    applying the aforementioned bijection to the other.
\end{rem}

\begin{theorem}[Main Theorem]
    The number of intervals in those posets is equal to
    the $n+1^{th}$ term of the integer sequence defined by
    https://oeis.org/A005700.\\
    The first terms of this sequence are $1, 1, 3, 14, 84,
    594, 4719, 40898, 379236, 3711916, ...$\\
    Alec Mihailovs proved this sequence to be equal to
    $$\frac {6 (2n)! (2n+2)!}{n!(n+1)!(n+2)!(n+3)!}$$.
\end{theorem}

\begin{proof}
    As the number of intervals in the poset for Dyck words
    can be seen as the number of pairs $(w_1, w_k)$ such that
    $w_1 \gtrdot_d w_2 \gtrdot_d \cdots \gtrdot_d w_k$, we can
    define it as the number of \emph{nested pairs of Dyck paths}.
    This has been proved to be equal to this integer sequence by
    Bruce Westbury in 2013.
\end{proof}

We now extend this construction to the non-primitive case.

\subsubsection{Classical Dyck - Parking Posets}

\begin{definition}[$\gtrdot_{ld}$]
    For $w$ and $w'$ two labeled Dyck words, we say
    that $w$ covers $w'$, written $w \gtrdot_{ld} w'$,
    if $\exists l, r, x, x', y, z, z'$ such that :
    \begin{itemize}
        \item $l$ is either empty or ends with $0$
        \item $r$ is either empty or starts with $0$
        \item $x = x_1x_2 \cdots$ has all its digits $> 0$
        \item $z = z_1z_2 \cdots$ has all its digits $> 0$
        \item $x' = x$ where $y$ is correctly inserted
            regarding the order condition
        \item $y$ is in $z$, and $z' = z$ where $y$ is removed
        \item $w = lx0zr$
        \item $w' = lx'0z'r$
    \end{itemize}  
\end{definition}

\begin{example}[$n = 5$]
    $104503600200 \gtrdot_{ld} 10345060200$
    \begin{itemize}
        \item $l = 10$
        \item $r = 0200$
        \item $x = 45$
        \item $x' = 345$
        \item $y = 3$
        \item $z = 36$
        \item $z' = 6$
    \end{itemize}
    \input{fig/fig33.tex}
\end{example}

\begin{definition}[Rise]
    A \emph{rise} of a decorated Dyck word is a maximal
    sequence of non-zero digits preceding a zero.
\end{definition}

\begin{example}[$n = 5$]
    In order, the rises of $104503600200$ are :\\
    \begin{itemize*}
        \item $1$
        \item $45$
        \item $36$
        \item $\emptyset$
        \item $2$
        \item $\emptyset$
    \end{itemize*}
\end{example}

\begin{rem}
    If $w_1 \gtrdot_{ld} w_2$, then the path corresponding to
    $w_2$ is \emph{over} the path corresponding to $w_1$,
    and the \emph{difference} between the two paths is a
    square of size 1 by 1.\\
    Furthermore, the covering relation can be seen as follows :
    $w_1$ covers $w_2$ if we can obtain $w_2$ by taking a
    digit from the $i + 1^{th}$ rise of $w_1$, and inserting it
    into the $i^{th}$ rise of $w_1$ in increasing order.
\end{rem}

\begin{prop}
    This covering relation defines a \emph{poset}
    for $\mathcal{LD}_n$.
\end{prop}

\begin{example}[The poset of $\mathcal{LD}_3$]
    ~\\
    \begin{center}
        \input{fig/fig36.tex}
        There are $4^2 = 16$ elements in this poset.
    \end{center}
\end{example}

\begin{definition}[$\gtrdot$]
    For $f$ and $g$ two parking functions, we say
    that $f$ covers $g$, written $f \gtrdot g$, if
    $\exists i$ such that :
    \begin{itemize}
        \item $f = (a_1, \ldots, a_{i-1}, a_i,\ \ \ \ 
            a_{i+1}, \ldots, a_n)$
        \item $g = (a_1, \ldots, a_{i-1}, a_i - 1, a_{i+1},
        \ldots, a_n)$
    \end{itemize}
    That is, the same relation as for primitive
    parking functions.
\end{definition}

\begin{example}[$n = 6$]
    $(2, 1, 5, 3, 1, 4) \gtrdot (2, 1, 5, 2, 1, 4)$    
\end{example}

\begin{prop}
    This covering relation defines a \emph{poset}
    for $\mathcal{PF}_n$.
\end{prop}

\begin{example}[The poset of $\mathcal{PF}_3$]
    ~\\
    \begin{center}
        \input{fig/fig37.tex}
        There are $4^2 = 16$ elements in this poset.
    \end{center}
\end{example}

\begin{rem}
    The two posets are isomorphic, and one can be obtained by
    applying the aforementioned bijection to the other.
\end{rem}

\begin{conj}[Main Conjecture]
    The number of intervals in those posets is equal to
    the $n+1^{th}$ term of the integer sequence defined by
    https://oeis.org/A196304.\\
    The first terms of this sequence are $1, 1, 5, 64, 1587,
    65421, 4071178, 357962760, 4237910716, ...$.
\end{conj}

While, to the best of our knowledge, there is no combinatorial
structure proved to follow this integer sequence, tests on
$n = 1, 2, \cdots, 8$ suggest that the number of intervals in
those posets might be one.\\

To go further, the next chapter will tackle a generalization
of classical parking functions called \emph{Rational Parking
Functions}.
The upgrade can be seen as such :
Let $(a_1, \ldots, a_n)$ be a sequence of positive integers,
and $(b_1, \ldots, b_n)$ its non-decreasing rearrangement.
In the classical case, the bounds for $(b_1, \ldots, b_n)$
were $(1, \ldots, n)$, thus simply depending on the integer $n$.
In the rational case, the bounds will depend on \emph{two
coprime integers} $a$ and $b$, namely $(1, 1 + \frac{b}{a},
1 + \frac{2b}{a}, 1 + \frac{3b}{a}, \ldots)$, with $a = n$. 