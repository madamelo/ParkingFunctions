\section{A direct poset linked to Rational Dyck paths}

\subsection{Rational Dyck Paths}

\begin{definition}[a, b - Dyck Word]
    An \emph{a, b - Dyck word} is a word $w \in \{0,1\}^*$
    such that :
    \begin{itemize}
        \item for each \emph{suffix} $w'$ of $w$,
            $$|w'|_1 \geqslant \frac{a}{b}|w'|_0$$.
        \item $|w|_0 = b$.
        \item $|w|_1 = a$.
    \end{itemize}
\end{definition}

An a, b - Dyck word can be represented as a 
\emph{path} from $(0,0)$ to $(b,a)$ that stays over
$y = \frac{a}{b}x$, called an \emph{a, b - Dyck path} :
\begin{itemize}
    \item Each $1$ corresponds to a \emph{North step}
    $\uparrow$. 
    \item Each $0$ corresponds to an \emph{East step}
    $\rightarrow$.
\end{itemize}
We denote by $\mathcal{R}_{a, b}$ the set of
a, b - Dyck words.

\begin{example}[$a > b : a = 7, b = 3$]
    ~\\
    \begin{align*}
        &w_1 = 1110011110 \text{ is \emph{not} a 7, 3 - Dyck
        word, because } |11100|_1 = 3\\
        & \hspace{5cm} < \frac{7}{3}|11100|_0
        = \frac{14}{3} = 4 \frac{1}{3}.\\
        &w_2 = 1110111010 \text{ \emph{is} a 7, 3 - Dyck 
        word : }\\
    \end{align*}
    \input{fig/fig38.tex}
\end{example}

\begin{example}[$a < b : a = 3, b = 5$]
    ~\\
    \begin{align*}
        &w_1 = 10100010 \text{ is \emph{not} a 3, 5 - Dyck
        word, because } |101000|_1 = 2\\
        & \hspace{5cm} < \frac{3}{5}|101000|_0
        = \frac{12}{5} = 2 \frac{2}{5}.\\
        &w_2 = 10100100 \text{ \emph{is} a 3, 5 - Dyck 
        word : }\\
    \end{align*}
    \input{fig/fig39.tex}
\end{example}

\begin{theorem}[Bizley, 1954]
    Let $r_{a,b}$ be the cardinal of $\mathcal{R}_{a,b}$.
    We have $$r_{a,b} = \frac{1}{a+b} \binom {a+b}{a} =
    \frac{(a+b-1)!}{a!b!}$$
\end{theorem}

which is, again, the rational Catalan number $Cat(a,b)$.

\begin{example}[$a = 7, b = 2$]
    $r_n = 4$.
    \begin{center}
        \input{fig/fig40.tex}
        \input{fig/fig41.tex}
        \input{fig/fig42.tex}
        \input{fig/fig43.tex}
    \end{center}
\end{example}

\begin{prop}
    This means we can create a \emph{bijection} between
    $\mathcal{PF'}_{a,b}$ and $\mathcal{R}_{a,b}$.
\end{prop}

\begin{proof}
    ~\
\begin{itemize}
    \item $\mathcal{PF'}_{a,b} \to \mathcal{R}_{a,b}$ :
    Let $f = (a_1, \ldots, a_n) \in \mathcal{PF'}_{a,b}$
    be our rational primitive parking function.
    For $i \in \{1, \ldots, b\}$, we define $l_i$ the
    number of occurences of $i$ in $f$.\\
    The corresponding rational Dyck word will be
    $\underbrace{1 \cdots 1}_{l_1}0
     \underbrace{1 \cdots 1}_{l_2}0 \cdots
     \underbrace{1 \cdots 1}_{l_b}0$.
    
    \item $\mathcal{R}_{a,b} \to \mathcal{PF'}_{a,b}$ :
    Let $w$ be our rational Dyck word, and consider its path
    representation. We define $s_i$ to be the distance
    between the segment from $(0, i - 1)$ to $(0, i)$
    and the $i^{th}$ North step. Then, let $a_i = s_i + 1$.\\
    The corresponding rational primitive parking function is 
    $(a_1, \ldots, a_a)$.
\end{itemize}
\end{proof}

\begin{rem}
    This bijection is exactly the same as the one between
    classical primitive parking functions and Dyck paths.
\end{rem}

\begin{example}[$a > b : a = 7, b = 3,
    \mathcal{PF'}_{a,b} \to \mathcal{R}_{a,b}$]
    ~\
    \begin{itemize}
        \item $f = (1, 1, 1, 2, 2, 3, 3)$
            \subitem $l_1 = 3$
            \hspace{2cm} $l_2 = 2$
            \hspace{2cm} $l_3 = 2$
        \item $w = (1110110110)$
    \end{itemize}
    \input{fig/fig44.tex}
\end{example}

\begin{example}[$a < b : a = 3, b = 5,
    \mathcal{PF'}_{a,b} \to \mathcal{R}_{a,b}$]
    ~\
    \begin{itemize}
        \item $f = (1, 1, 4)$
            \subitem $l_1 = 2$
            \hspace{2cm} $l_2$
            \hspace{2cm} $l_3 = 0$
            \subitem $l_4 = 1$
            \hspace{2cm} $l_5 = 0$
        \item $w = 11000100$
    \end{itemize}
    \input{fig/fig45.tex}
\end{example}

\begin{example}[$a > b : a = 7, b = 3,
    \mathcal{R}_{a,b} \to \mathcal{PF'}_{a,b}$]
    ~\
    \begin{itemize}
        \item $w = 1111011010$
    \end{itemize}
    \input{fig/fig46.tex}
    \begin{itemize}
        \item Distances : 
            \subitem $s_1 = 0$
                \hspace{2cm} $a_1 = 1$
            \subitem $s_2 = 0$
                \hspace{2cm} $a_2 = 1$
            \subitem $s_3 = 0$
                \hspace{2cm} $a_3 = 1$
            \subitem $s_4 = 0$
                \hspace{2cm} $a_4 = 1$
            \subitem $s_5 = 1$
                \hspace{2cm} $a_5 = 2$
            \subitem $s_6 = 1$
                \hspace{2cm} $a_6 = 2$
            \subitem $s_7 = 2$
                \hspace{2cm} $a_7 = 3$
        \item $f = (1, 1, 1, 1, 2, 2, 3)$
    \end{itemize}
    
\end{example}

\begin{example}[$a < b : a = 3, b = 5,
    \mathcal{R}_{a,b} \to \mathcal{PF'}_{a,b}$]
    ~\
    \begin{itemize}
        \item $w = 10101000$
    \end{itemize}
    \input{fig/fig47.tex}
    \begin{itemize}
        \item Distances : 
            \subitem $s_1 = 0$
                \hspace{2cm} $a_1 = 1$
            \subitem $s_2 = 1$
                \hspace{2cm} $a_2 = 2$
            \subitem $s_3 = 2$
                \hspace{2cm} $a_3 = 3$
        \item $f = (1, 2, 3)$
    \end{itemize}
    
\end{example}

Once again, we will generalize to the non-primitive case by
adding a \emph{labeling} to our rational Dyck paths.

\subsection{Rational Labeled Dyck Paths}

\begin{definition}[Labeled a, b - Dyck Word]
    A \emph{labeled a, b - Dyck word} is a word $w \in 
    \{0, \ldots, n\}^*$ such that :
    \begin{itemize}
        \item for each suffix $w'$ of $w$,
            $$|w'|_{\neq 0} \geqslant \frac{a}{b}|w'|_0$$.
        \item $|w|_0 = b$.
        \item $|w|_{\neq 0} = a$.
        \item for each $i \in \{1, \ldots, a\}$, $w$ has 
            exactly one occurence of $i$.
        \item if $w_i \neq 0$ and $w_{i+1} \neq 0$,
            then $w_i < w_{i+1}$. That is, consecutive
            North steps have increasing labels.
    \end{itemize}
\end{definition}

A labeled a, b - Dyck word can be represented
as a path from $(0,0)$ to $(b,a)$, where each North
step is associated to a label :
\begin{itemize}
    \item Each $i \neq 0$ corresponds to a
        \emph{North step} $\uparrow$ labeled $i$.
    \item Each $0$ corresponds to an
        \emph{East step} $\rightarrow$.
\end{itemize}
Those paths are called \emph{labeled a, b - Dyck paths}.\\
We denote by $\mathcal{LR}_{a,b}$ the set of labeled
a, b - Dyck words.

\begin{example}[$a > b : a = 7, b = 3$]
       $w_2 = 2456017030$ :\\
    \input{fig/fig48.tex}
\end{example}

\begin{example}[$a < b : a = 3, b = 5$]
    $w = 20130000$ :\\
    \input{fig/fig49.tex}
\end{example}

\begin{theorem}
    Let $lr_{a,b}$ be the cardinal of $\mathcal{LR}_{a,b}$.
    We have $$lr_{a,b} = b^{a - 1}$$.
\end{theorem}

\begin{example}[$a > b : a = 4, b = 3$]
    $lr_{a,b} = 3^3 = 27$
    \begin{itemize}
        \item Word of shape $XXXX000$ :
            \subitem $1234000$
        \item Words of shape $XXX0X00$ :
            \subitem $1230400$
            \hspace{2cm} $1240300$
            \hspace{2cm} $1340200$
            \subitem $2340100$
        \item Words of shape $XX0XX00$ :
            \subitem $1203400$
            \hspace{2cm} $1302400$
            \hspace{2cm} $1402300$
            \subitem $2301400$
            \hspace{2cm} $2401300$
            \hspace{2cm} $3401200$
        \item Words of shape $XXX00X0$ :
            \subitem $1230040$
            \hspace{2cm} $1240030$
            \hspace{2cm} $1340020$
            \subitem $2340010$
        \item Words of shape $XX0X0X0$ :
            \subitem $1203040$
            \hspace{2cm} $1204030$
            \hspace{2cm} $1302040$
            \subitem $1304020$
            \hspace{2cm} $1402030$
            \hspace{2cm} $1403020$
            \subitem $2301040$
            \hspace{2cm} $2304010$
            \hspace{2cm} $2401030$
            \subitem $2403010$
            \hspace{2cm} $3401020$
            \hspace{2cm} $3402010$
    \end{itemize}
    
\end{example}

\begin{prop}
    This means we can create a \emph{bijection} between
    $\mathcal{PF}_{a,b}$ and $\mathcal{LR}_{a,b}$.
\end{prop}

\begin{proof}
    ~\
    \begin{itemize}
        \item $\mathcal{PF}_{a,b} \to \mathcal{LR}_{a,b}$ :
        Let $f = (a_1, \ldots, a_n) \in \mathcal{PF}_{a,b}$
        be our a, b - parking function. For $i \in \{1, \ldots,
        b\}$, we define $im_i$ : $\{j\ |\ a_j = i\}$. \\
        We then define $im_{i,1}, \ldots, im_{i,k_i}$ to be
        the elements of $im_i$ in increasing order.\\
        The corresponding labeled a, b - Dyck word will be \\
        $\underbrace{im_{1,1} \cdots im_{1,k_1}}_{im_1}0
         \underbrace{im_{2,1} \cdots im_{2,k_2}}_{im_2}0
         \cdots
         \underbrace{im_{n,1} \cdots im_{b,k_b}}_{im_b}0$.

        \item $\mathcal{LR}_{a,b} \to \mathcal{PF}_n$ :
        Let w be our labeled a, b - Dyck word, and consider its
        path representation. We define $s_i$ to be the
        distance between the segment from $(0, i-1)$ to
        $(0,i)$ and the $i^{th}$ North step.\\
        Then, let $label(i)$ be the label of the $i^{th}$
        North step, and $dist_i = \{label(j) | s_j = i\}$
        be the set of the labels of all North steps at
        distance $i$.\\
        Then, if $j \in dist_i$, let $a_j = i + 1$.\\
        The corresponding parking function is
        $(a_1, \ldots, a_a)$.
    \end{itemize}
\end{proof}

\begin{rem}
    This bijection is exactly the same as the one between
    classical parking functions and labeled Dyck paths.
\end{rem}

\begin{example}[$a > b : a = 7, b = 3,
        \mathcal{PF}_{a,b} \to \mathcal{LR}_{a,b}$]
    ~\
    \begin{itemize}
        \item $f = (2, 1, 3, 1, 1, 3, 2)$
            \subitem $im_1 = \{2, 4, 5\}$
            \hspace{16mm} $im_2 = \{1, 7\}$
            \hspace{24mm} $im_3 = \{3, 6\}$
        \item $w = 2450170360$
    \end{itemize}
    \input{fig/fig50.tex}
\end{example}

\begin{example}[$a < b : a = 3, b = 5,
    \mathcal{PF}_{a,b} \to \mathcal{LR}_{a,b}$]
    ~\
    \begin{itemize}
        \item $f = (4, 1, 2)$
            \subitem $im_1 = \{2\}$
            \hspace{16mm} $im_2 = \{3\}$
            \hspace{24mm} $im_3 = \emptyset$
            \subitem $im_4 = \{1\}$
            \hspace{16mm} $im_5 = \emptyset$
        \item $w = 20300100$
    \end{itemize}
    \input{fig/fig51.tex}
\end{example}

\begin{example}[$a > b : a = 7, b = 3,
        \mathcal{LR}_{a,b} \to \mathcal{PF}_{a,b}$]
    ~\
    \begin{itemize}
        \item $w = 2570134060$
    \end{itemize}
    \input{fig/fig52.tex}
    \begin{itemize}
        \item Distances :
            \subitem $s_1 = 0$
            \hspace{2cm} $s_2 = 0$
            \hspace{2cm} $s_3 = 0$
            \subitem $s_4 = 1$
            \hspace{2cm} $s_5 = 1$
            \hspace{2cm} $s_6 = 1$
            \subitem $s_7 = 2$
        \item Labels :
            \subitem $dist_0 = \{2, 5, 7\}$
            \hspace{2cm} $dist_1 = \{1, 3, 4\}$
            \hspace{2cm} $dist_2 = \{6\}$
        \item $f = (2, 1, 2, 2, 1, 3, 1)$
    \end{itemize}
\end{example}

\begin{example}[$a < b : a = 3, b = 5,
    \mathcal{LR}_{a,b} \to \mathcal{PF}_{a,b}$]
    ~\
    \begin{itemize}
        \item $w = 13000200$
    \end{itemize}
    \input{fig/fig53.tex}
    \begin{itemize}
        \item Distances :
            \subitem $s_1 = 0$
            \hspace{2cm} $s_2 = 0$
            \hspace{2cm} $s_3 = 3$
        \item Labels :
            \subitem $dist_0 = \{1, 3\}$
            \hspace{2cm} $dist_1 = \emptyset$
            \hspace{2cm} $dist_2 = \emptyset$
            \subitem $dist_3 = \{2\}$
            \hspace{2cm} $dist_4 = \emptyset$
        \item $f = (1, 4, 1)$
    \end{itemize}
\end{example}

\begin{rem}
    The rational primitive parking functions are exactly the
    rational parking functions corresponding to rational labeled
    Dyck paths where the $i^{th}$ North step is labeled $i$.
\end{rem}

Now that we have these four cover relations and the two
appropriate bijections, we are able to create the 
corresponding bijective rational posets.

\subsection{Rational Dyck - Parking Posets}

\subsubsection{Rational Primitive Dyck - Parking Posets}

\begin{definition}[$\gtrdot_r$]
    For $w$ and $w'$ two a, b - Dyck words, we say that $w$
    covers $w'$, written $w \gtrdot_r w'$, if
    $\exists w_1, w_2$ such that :
    \begin{itemize}
        \item $w = w_101w_2$
        \item $w' = w_110w_2$
    \end{itemize}  
\end{definition}

\begin{example}[$a = 7, b = 3$]
    $1111011010 \gtrdot_r 1111011100$
    \begin{itemize}
        \item $w_1 = 1111011$
        \item $w_2 = 0$
    \end{itemize}
    \input{fig/fig54.tex}
\end{example}

\begin{rem}
    If $w_1 \gtrdot_r w_2$, then the path corresponding to
    $w_2$ is \emph{over} the path corresponding to $w_1$,
    and the \emph{difference} between the two paths is a
    square of size 1 by 1.
\end{rem}

\begin{prop}
    This covering relation defines a \emph{poset}
    for $\mathcal{R}_{a,b}$.
\end{prop}

\begin{example}[$a > b$ : The poset of $\mathcal{R}_{5,3}$]
    ~\\
    \begin{center}
        \input{fig/fig55.tex}
        There are $\frac {1}{8} \binom{8}{5} = \frac{42}{6} = 7$
        elements in this poset.
    \end{center}
\end{example}

\begin{example}[$a < b$ : The poset of $\mathcal{R}_{3,7}$]
    ~\\
    \begin{center}
        \input{fig/fig56.tex}
        There are $\frac {1}{10} \binom{10}{3} = \frac{72}{6} = 12$
        elements in this poset.
    \end{center}
\end{example}

\begin{definition}[$\gtrdot'$]
    For $f$ and $g$ two rational primitive a, b - parking 
    functions, we say that $f$ covers $g$, written
    $f \gtrdot' g$, if $\exists i$ such that :
    \begin{itemize}
        \item $f = (a_1, \ldots, a_{i-1}, a_i,\ \ \ \ 
            a_{i+1}, \ldots, a_n)$
        \item $g = (a_1, \ldots, a_{i-1}, a_i - 1, a_{i+1},
        \ldots, a_n)$
    \end{itemize}
\end{definition}

\begin{example}[$a > b : a = 7, b = 3$]
    $(1, 1, 1, 2, 2, 2, 3) \gtrdot' (1, 1, 1, 1, 2, 2, 3)$    
\end{example}

\begin{example}[$a < b : a = 3, b = 5$]
    $(1, 2, 4) \gtrdot' (1, 1, 4)$    
\end{example}

\begin{prop}
    This covering relation defines a \emph{poset}
    for $\mathcal{PF'}_{a,b}$.
\end{prop}

\begin{example}[$a > b$ : The poset of $\mathcal{PF'}_{5,3}$]
    ~\\
    \begin{center}
        \input{fig/fig57.tex}
        There are $\frac {1}{8} \binom{8}{5} = \frac{42}{6} = 7$
        elements in this poset.
    \end{center}
\end{example}

\begin{example}[$a < b$ : The poset of $\mathcal{PF'}_{3,7}$]
    ~\\
    \begin{center}
        \input{fig/fig58.tex}
        There are $\frac {1}{10} \binom{10}{3} = \frac{72}{6} = 12$
        elements in this poset.
    \end{center}
\end{example}

\begin{rem}
    The posets of $\mathcal{PF'}_{a,b}$ and $\mathcal{R}_{a,b}$
    are isomorphic, and one can be obtained by
    applying the aforementioned bijection to the other.
\end{rem}

\subsubsection{Rational Dyck - Parking Posets}

\begin{definition}[$\gtrdot_{lr}$]
    For $w$ and $w'$ two labeled a, b - Dyck words, we say
    that $w$ covers $w'$, written $w \gtrdot_{lr} w'$,
    if $\exists l, r, x, x', y, z, z'$ such that :
    \begin{itemize}
        \item $l$ is either empty or ends with $0$
        \item $r$ is either empty or starts with $0$
        \item $x = x_1x_2 \cdots$ has all its digits $> 0$
        \item $z = z_1z_2 \cdots$ has all its digits $> 0$
        \item $x' = x$ where $y$ is correctly inserted
            regarding the order condition
        \item $y$ is in $z$, and $z' = z$ where $y$ is removed
        \item $w = lx0zr$
        \item $w' = lx'0z'r$
    \end{itemize}  

\end{definition}

\begin{example}[$a > b : a = 7, b = 3$]
    $2460150370 \gtrdot_{lr} 2460135070$
    \begin{itemize}
        \item $l = 2460$
        \item $r = 0$
        \item $x = 15$
        \item $x' = 135$
        \item $y = 3$
        \item $z = 37$
        \item $z' = 7$
    \end{itemize}
\end{example}

\begin{example}[$a < b : a = 3, b = 5$]
    $20301000 \gtrdot_{lr} 20130000 $
    \begin{itemize}
        \item $l = 20$
        \item $r = 000$
        \item $x = 3$
        \item $x' = 13$
        \item $y = 1$
        \item $z = 1$
        \item $z' = \emptyset$
    \end{itemize}
\end{example}

\begin{rem}
    If $w_1 \gtrdot_{lr} w_2$, then the path corresponding to
    $w_2$ is \emph{over} the path corresponding to $w_1$,
    and the \emph{difference} between the two paths is a
    square of size 1 by 1.\\
    Furthermore, the covering relation can be seen as follows :
    $w_1$ covers $w_2$ if we can obtain $w_2$ by taking a
    digit from the $i + 1^{th}$ rise of $w_1$, and inserting it
    into the $i^{th}$ rise of $w_1$ in increasing order.
\end{rem}

\begin{prop}
    This covering relation defines a \emph{poset}
    for $\mathcal{LR}_{a,b}$.
\end{prop}

\begin{example}[$a > b$ : The poset of $\mathcal{LR}_{5,2}$]
    ~\\
    \begin{center}
        \input{fig/fig60.tex}
        Arrows have been simplified for readability.\\
        Arrows between the top 2 levels are to be read
        as ending at the cross of the corresponding color.\\
        There are $2^4 = 16$ elements in this poset.
    \end{center}
\end{example}


\begin{example}[$a < b$ : The poset of $\mathcal{LR}_{2,7}$]
    ~\\
    \begin{center}
        \input{fig/fig61.tex}
        There are $7^1 = 7$ elements in this poset.
    \end{center}
\end{example}

\begin{definition}[$\gtrdot$]
    For $f$ and $g$ two rational parking functions, we say
    that $f$ covers $g$, written $f \gtrdot g$, if
    $\exists i$ such that :
    \begin{itemize}
        \item $f = (a_1, \ldots, a_{i-1}, a_i,\ \ \ \ 
            a_{i+1}, \ldots, a_n)$
        \item $g = (a_1, \ldots, a_{i-1}, a_i - 1, a_{i+1},
        \ldots, a_n)$
    \end{itemize}
    That is, the same relation as for rational primitive
    parking functions.
\end{definition}

\begin{example}[$a > b : a = 7, b = 3$]
    $(2, 3, 1, 1, 2, 1, 3) \gtrdot (2, 3, 1, 1, 1, 1, 3)$    
\end{example}

\begin{example}[$a < b : a = 3, b = 5$]
    $(4, 1, 2) \gtrdot (3, 1, 2)$    
\end{example}

\begin{prop}
    This covering relation defines a \emph{poset}
    for $\mathcal{PF}_{a,b}$.
\end{prop}

\begin{example}[$a > b$ : The poset of $\mathcal{PF}_{5,2}$]
    ~\\
    \begin{center}
        \input{fig/fig62.tex}
        Arrows have been simplified for readability.\\
        Arrows between the top 2 levels are to be read
        as ending at the cross of the corresponding color.\\
        There are $2^4 = 16$ elements in this poset.
    \end{center}
\end{example}

\begin{example}[$a < b$ : The poset of $\mathcal{PF}_{2,7}$]
    ~\\
    \begin{center}
        \input{fig/fig63.tex}
        There are $7^1 = 7$ elements in this poset.
    \end{center}
\end{example}

\begin{rem}
    The posets of $\mathcal{PF}_{a,b}$ and $\mathcal{LR}_{a,b}$
    are isomorphic, and one can be obtained by
    applying the aforementioned bijection to the other.
\end{rem}

As we finish this chapter, we now have \emph{direct} ways
to compare elements of the four types of parking functions.
Furthermore, we also have four corresponding bijections with
the fundamental combinatorial structure that is the Dyck path.

Furthermore, we have seen the two main results of this article
in Theorem 8 and the corresponding Conjecture for the
non-primitive case, regarding the number of relations in the
aforementioned posets for the classical case.\\

We now jump to an other construction linked to parking functions
named \emph{Parking Trees}.
Defined by Delcroix-Oger, Josuat-Vergès and Randazzo in
\cite{ref9}, classical parking trees are in bijection with
classical parking functions.
In this third and final chapter, we recall the aforementioned
notion, and extend it to the rational case.